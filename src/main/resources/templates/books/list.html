<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout(~{::section})}">
<section class="d-flex justify-content-between align-items-center mt-3">
	<h2>Books</h2>
	<a class="btn btn-primary" th:href="@{/books/new}">Add Book</a>
</section>

<form class="row g-2 my-3" method="get">
	<div class="col-md-4">
		<input class="form-control" type="text" name="q" placeholder="Search by title, author, or category" th:value="${keyword}">
	</div>
	<div class="col-auto">
		<button class="btn btn-outline-secondary" type="submit">Search</button>
	</div>
</form>

<table class="table table-striped table-hover">
	<thead>
	<tr>
		<th>Title</th>
		<th>Author</th>
		<th>Category</th>
		<th>ISBN</th>
		<th>Price</th>
		<th>Stock</th>
		<th></th>
	</tr>
	</thead>
	<tbody>
	<tr th:each="b : ${books}">
		<td th:text="${b.title}"></td>
		<td th:text="${b.author}"></td>
		<td th:text="${b.category}"></td>
		<td th:text="${b.isbn}"></td>
		<td th:text="${#numbers.formatDecimal(b.price, 1, 'COMMA', 2, 'POINT')}"></td>
		<td th:text="${b.stockQuantity}" th:classappend="${b.stockQuantity} &lt; 5 ? 'low-stock' : ''"></td>
		<td class="text-end">
			<a class="btn btn-sm btn-outline-primary" th:href="@{'/books/' + ${b.id} + '/edit'}">Edit</a>
			<form th:action="@{'/books/' + ${b.id} + '/delete'}" method="post" class="d-inline">
				<button class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this book?')">Delete</button>
			</form>
		</td>
	</tr>
	</tbody>
</table>
</html>


